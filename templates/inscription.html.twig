{% extends 'base_template.twig' %}

{% block title %}
    Créer un compte — DogSynergie
{% endblock %}

{% block content %}
    <div style="background-color: #FEFAE0; min-height: 100vh; padding: 0; display: flex; flex-direction: column;">
        <div class="ds-profile-hero">
            <div class="ds-profile-hero-inner">
                <h1 class="ds-profile-hero-title"><i class="bi bi-person-plus me-2"></i>Créer un compte</h1>
                <p class="ds-profile-hero-subtitle">Rejoignez la communauté DogSynergie</p>
            </div>
        </div>

        <!-- Contenu principal -->
        <div style="flex: 1; padding: 50px 40px; display: flex; justify-content: center; background-color: #FEFAE0;">
            <div style="width: 100%; max-width: 700px;">
                <div style="background-color: #FAF6E9; padding: 40px; border-radius: 12px; box-shadow: 0 4px 16px rgba(83, 112, 49, 0.1);">
                    <form method="post"
                        action="?controleur=Utilisateur&methode=ajouterUtilisateur"
                        enctype="multipart/form-data">
                        <!-- PSEUDO + EMAIL -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 28px;">
                            <div>
                                <label for="pseudo" style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">Pseudo *</label>
                                {% if erreurs is defined and erreurs %}
                                    {% for err in erreurs %}
                                        {% if 'pseudo' in err|lower %}
                                            <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <input type="text"
                                    id="pseudo"
                                    name="pseudo"
                                    minlength="2"
                                    maxlength="30"
                                    title="Pseudo public entre 2 et 30 caractères"
                                    placeholder="Choisissez un pseudo"
                                    value="{{ old.pseudo|default('') }}"
                                    style="width: 100%; padding: 12px 16px; border: 1px solid #DDA15E; border-radius: 6px; font-size: 14px; background-color: #FEFAE0; color: #2c2c2c; box-sizing: border-box; transition: border-color 0.2s;" onfocus="this.style.borderColor='#537031'; this.style.boxShadow='0 0 0 3px rgba(83, 112, 49, 0.1)';" onblur="this.style.borderColor='#DDA15E'; this.style.boxShadow='none';" required />
                            </div>

                            <div>
                                <label for="email" style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">E-mail *</label>
                                {% if erreurs is defined and erreurs %}
                                    {% for err in erreurs %}
                                        {% if 'email' in err|lower or 'mail' in err|lower %}
                                            <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <input type="email"
                                    id="email"
                                    minlength="5"
                                    maxlength="100"
                                    name="email"
                                    title="Saisissez une adresse email valide (ex : nom@domaine.fr)"
                                    value="{{ old.email|default('') }}"
                                    placeholder="votreE-mail@example.org"
                                    style="width: 100%; padding: 12px 16px; border: 1px solid #DDA15E; border-radius: 6px; font-size: 14px; background-color: #FEFAE0; color: #2c2c2c; box-sizing: border-box; transition: border-color 0.2s;" onfocus="this.style.borderColor='#537031'; this.style.boxShadow='0 0 0 3px rgba(83, 112, 49, 0.1)';" onblur="this.style.borderColor='#DDA15E'; this.style.boxShadow='none';" required />
                            </div>
                        </div>

                        <!-- PHOTO + TELEPHONE -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 28px;">
                            <div>
                                <label for="photoProfil" style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px; color: #9AAD5A;">Photo de profil</label>
                                {% if erreurs is defined and erreurs %}
                                    {% for err in erreurs %}
                                        {% if 'photo' in err|lower or 'image' in err|lower or 'fichier' in err|lower %}
                                            <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <input type="file"
                                    accept="image/*"
                                    id="photoProfil"
                                    name="photoProfil"
                                    title="Photo optionnelle au format image (JPG, PNG, GIF)"
                                    style="width: 100%; padding: 12px 16px; border: 1px solid #9AAD5A; border-radius: 6px; font-size: 14px; background-color: #FEFAE0; color: #2c2c2c; box-sizing: border-box;" />
                            </div>

                            <div>
                                <label for="numTelephone" style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">Téléphone *</label>
                                {% if erreurs is defined and erreurs %}
                                    {% for err in erreurs %}
                                        {% if 'numtelephone' in err|lower or 'téléphone' in err|lower or 'telephone' in err|lower %}
                                            <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <input type="tel"
                                    id="numTelephone"
                                    name="numTelephone"
                                    inputmode="numeric"
                                    pattern="0[1-9][0-9]{8}"
                                    minlength="10"
                                    maxlength="10"
                                    title="Format FR requis : 10 chiffres en commençant par 0 (ex : 0612345678)"
                                    placeholder="Ex : 0612345678"
                                    style="width: 100%; padding: 12px 16px; border: 1px solid #DDA15E; border-radius: 6px; font-size: 14px; background-color: #FEFAE0; color: #2c2c2c; box-sizing: border-box; transition: border-color 0.2s;" onfocus="this.style.borderColor='#537031'; this.style.boxShadow='0 0 0 3px rgba(83, 112, 49, 0.1)';" onblur="this.style.borderColor='#DDA15E'; this.style.boxShadow='none';" required />
                            </div>
                        </div>

                        <!-- ADRESSE + MDP -->
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 20px; margin-bottom: 28px;">
                            <div>
                                <label for="adresse" style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">Adresse *</label>
                                {% if erreurs is defined and erreurs %}
                                    {% for err in erreurs %}
                                        {% if 'adresse' in err|lower %}
                                            <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <input type="text"
                                    id="adresse"
                                    name="adresse"
                                    minlength="5"
                                    maxlength="120"
                                    pattern="[^,]+,\s*[A-Za-zÀ-ÿ][A-Za-zÀ-ÿ\s'’\-\.]{1,}"
                                    title="Saisissez l'adresse avec une ville, ex : 123 Rue Exemple, Paris"
                                    placeholder="123 Rue Exemple, Paris"
                                    style="width: 100%; padding: 12px 16px; border: 1px solid #DDA15E; border-radius: 6px; font-size: 14px; background-color: #FEFAE0; color: #2c2c2c; box-sizing: border-box; transition: border-color 0.2s;" onfocus="this.style.borderColor='#537031'; this.style.boxShadow='0 0 0 3px rgba(83, 112, 49, 0.1)';" onblur="this.style.borderColor='#DDA15E'; this.style.boxShadow='none';" required />
                            </div>

                            <div>
                                <label for="motDePasse" style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 10px;">Mot de passe *</label>
                                {% if erreurs is defined and erreurs %}
                                    {% for err in erreurs %}
                                        {% if 'motdepasse' in err|lower or 'mot de passe' in err|lower %}
                                            <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                        {% endif %}
                                    {% endfor %}
                                {% endif %}
                                <input type="password"
                                    id="motDePasse"
                                    name="motDePasse"
                                    minlength="8"
                                    maxlength="50"
                                    title="Minimum 8 caractères avec majuscule, minuscule, chiffre et caractère spécial"
                                    placeholder="Veuillez saisir un mot de passe"
                                    style="width: 100%; padding: 12px 16px; border: 1px solid #DDA15E; border-radius: 6px; font-size: 14px; background-color: #FEFAE0; color: #2c2c2c; box-sizing: border-box; transition: border-color 0.2s;" onfocus="this.style.borderColor='#537031'; this.style.boxShadow='0 0 0 3px rgba(83, 112, 49, 0.1)';" onblur="this.style.borderColor='#DDA15E'; this.style.boxShadow='none';" required />
                            </div>
                        </div>

                        <!-- ROLES -->
                        <div style="margin-bottom: 28px;">
                            <label style="display: block; color: #537031; font-size: 12px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; margin-bottom: 15px;">Rôle du compte *</label>
                            {% if erreurs is defined and erreurs %}
                                {% for err in erreurs %}
                                    {% if 'rôle' in err|lower or 'role' in err|lower or 'maître' in err|lower or 'promeneur' in err|lower %}
                                        <div style="color: #dc3545; font-size: 13px; margin-bottom: 8px;">{{ err }}</div>
                                    {% endif %}
                                {% endfor %}
                            {% endif %}

                            <div style="display: flex; align-items: center; gap: 8px; margin-bottom: 12px;">
                                <input type="checkbox"
                                    id="estMaitre"
                                    name="estMaitre"
                                    value="1"
                                    style="width: 18px; height: 18px; cursor: pointer; accent-color: #537031;" />
                                <label for="estMaitre" style="color: #2c2c2c; font-size: 14px; cursor: pointer; margin: 0;">
                                    Je suis maître de chien
                                </label>
                            </div>

                            <div style="display: flex; align-items: center; gap: 8px;">
                                <input type="checkbox"
                                    id="estPromeneur"
                                    name="estPromeneur"
                                    value="1"
                                    style="width: 18px; height: 18px; cursor: pointer; accent-color: #537031;" />
                                <label for="estPromeneur" style="color: #2c2c2c; font-size: 14px; cursor: pointer; margin: 0;">
                                    Je suis promeneur
                                </label>
                            </div>
                        </div>

                        <!-- BOUTONS -->
                        <div style="display: flex; gap: 12px;">
                            <a href="index.php"
                                style="flex: 1; background-color: #FAF6E9; color: #537031; padding: 14px 20px; font-size: 14px; border: 2px solid #DDA15E; border-radius: 6px; font-weight: 600; text-decoration: none; text-align: center; transition: all 0.2s;" onmouseover="this.style.backgroundColor='#F0F8EC'; this.style.borderColor='#537031';" onmouseout="this.style.backgroundColor='#FAF6E9'; this.style.borderColor='#DDA15E';">
                                Annuler
                            </a>
                            <a href="?controleur=Utilisateur&methode=authentification"
                                style="flex: 1; background-color: #FAF6E9; color: #537031; padding: 14px 20px; font-size: 14px; border: 2px solid #DDA15E; border-radius: 6px; font-weight: 600; text-decoration: none; text-align: center; transition: all 0.2s;" onmouseover="this.style.backgroundColor='#F0F8EC'; this.style.borderColor='#537031';" onmouseout="this.style.backgroundColor='#FAF6E9'; this.style.borderColor='#DDA15E';">
                                Se connecter
                            </a>
                            <button type="submit"
                                style="flex: 1; background: linear-gradient(135deg, #537031 0%, #4a5f28 100%); color: #FEFAE0; padding: 14px 20px; font-size: 14px; border: none; border-radius: 6px; font-weight: 600; cursor: pointer; transition: transform 0.2s; box-shadow: 0 2px 8px rgba(83, 112, 49, 0.2);" onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 4px 12px rgba(83, 112, 49, 0.3)';" onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 2px 8px rgba(83, 112, 49, 0.2)';">
                                Créer mon compte
                            </button>
                        </div>
                    </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}




