{% extends 'base_template.twig' %}

{% block title %}
    Liste des Promenades
{% endblock %}

{% block content %}
<div class="container-fluid py-5" style="background-color: #FEFAE0; min-height: 100vh;">
    <div class="row justify-content-center">
        <div class="col-12 col-lg-11">
            
            <h2 class="mb-5 text-center fw-bold" style="color:#537031;">Toutes les promenades disponibles</h2>

            {% for item in listePromenades %}
                
                <div class="card shadow-lg border-0 p-4 mb-5" style="background-color: #FAF6E9; border-radius:12px;">
                    <div class="row">
                        
                        <div class="col-12 col-md-3 border-end border-secondary-subtle">
                            <div class="text-center mb-4">
                                <div style="width: 100px; height: 100px; border: 2px solid #537031; background-color: #F0F0F0; margin-bottom: 10px;"
                                     class="rounded-circle mx-auto d-flex align-items-center justify-content-center overflow-hidden shadow-sm">
                                    {% if item.chien.getCheminPhoto() %}
                                        <img src="{{ item.chien.getCheminPhoto() }}" class="img-fluid" style="width: 100%; height: 100%; object-fit: cover;" />
                                    {% else %}
                                        <i class="bi bi-person-circle" style="font-size: 2.5rem; color: #aaa;"></i>
                                    {% endif %}
                                </div>
                                <p class="mb-1 fw-bold" style="color:#BC6C25; font-size:1.1rem;">
                                    {{ item.chien.getNom_Chien() }}
                                </p>
                                <p class="small text-muted">{{ item.chien.getRace() }}</p>
                            </div>

                            <hr style="border-color: #DDA15E; width: 60%; margin: 15px auto;" />

                            <div class="text-center">
                                <p class="mb-0 small" style="color:#537031;"><strong>Propriétaire :</strong></p>
                                <p class="mb-0">{{ item.proprietaire.getPseudo()|default('Inconnu') }}</p>
                            </div>
                        </div>

                        <div class="col-12 col-md-5 px-md-4">
                            <h5 class="fw-bold mb-2" style="color:#537031;">Description</h5>
                            <div class="p-3 border rounded shadow-sm"
                                 style="background-color: #fffdf5; border-color: #e0d8b0 !important; height: auto; min-height: 120px; max-height: 200px; overflow-y:auto; overflow-wrap:anywhere;">
                                {{ item.annonce.getDescription()|default('Pas de description.') | nl2br }}
                            </div>
                        </div>

                        <div class="col-12 col-md-4 ps-md-4 border-start border-secondary-subtle">
                            <h5 class="fw-bold mb-3" style="color:#537031;">Détails</h5>
                            <div class="mb-3">
                                <p class="mb-1"><i class="bi bi-calendar-event me-2" style="color:#BC6C25;"></i> {{ item.annonce.getDatePromenade() }}</p>
                                <p class="mb-1"><i class="bi bi-clock me-2" style="color:#BC6C25;"></i> {{ item.annonce.getHoraire() }}</p>
                                <p class="mb-1"><i class="bi bi-geo-alt me-2" style="color:#BC6C25;"></i> {{ item.annonce.getEndroitPromenade() }}</p>
                            </div>
                            
                            <hr style="border-color: #DDA15E;">
                            
                            <div class="d-flex justify-content-between align-items-center mb-3">
                                <span class="badge rounded-pill bg-success" style="font-size: 0.9rem;">{{ item.annonce.getTarif() }} €</span>
                                <span class="badge border border-secondary text-secondary">{{ item.promenade.statut }}</span>
                            </div>
                            
                            <div class="text-end">
                                <a href="index.php?controleur=Promenade&methode=afficherPromenade&id_promenade={{ item.promenade.getid_promenade() }}" class="btn btn-sm btn-outline-success">
                                    Voir détails
                                </a>
                            </div>
                        </div>

                    </div>
                </div>

            {% else %}
                <div class="alert alert-warning text-center" style="background-color: #F8F4E8; color: #BC6C25;">
                    <i class="bi bi-exclamation-triangle-fill me-2"></i>
                    Aucune promenade trouvée pour le moment.
                </div>
            {% endfor %}

        </div>
    </div>
</div>
{% endblock %}