<!DOCTYPE html>
<html lang="fr">
<head>
    {% block head %}
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="images/logo_dogsitter.png">

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap" rel="stylesheet">

    <!-- Bootstrap -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Bootstrap Icons -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">

    <!-- Tarte au citron -->
    <script src="/www/DogSitter/DogSitter/node_modules/tarteaucitronjs/tarteaucitron.min.js"></script>

    <script>
    tarteaucitron.init({
        highPrivacy: true, // Mode "Consentement fort"
        AcceptAllCta: true,
        DenyAllCta: true,
        privacyUrl: "/politique-de-confidentialite", // ta page de politique
        orientation: "bottom", // où apparaît la bannière
        showAlertSmall: false, // bannière petite
        cookieslist: true, // liste des cookies
    });

    // Ajouter Google Analytics
    tarteaucitron.user.gajsUa = 'G-Q93FFNL2NP'; // Remplace par ton UA ou G-ID
    tarteaucitron.user.gajsMore = function () { 
        /* code additionnel GA si nécessaire */
    };
    tarteaucitron.job = tarteaucitron.job || [];
    tarteaucitron.job.push('gajs');
    </script>


    <style>
        html, body {
            height: 100%;
            margin: 0;
            font-family: 'Poppins', sans-serif;
            background-color: #FEFAE0;
        }

        .required-star {
            color: #d9534f;
            margin-left: 4px;
        }

        .nav-link:hover,
        .nav-link:hover i {
            color: #DDA15E !important;
        }
    </style>

    <title>{% block title %}DogSynergie{% endblock %}</title>
    {% endblock %}
</head>

<body class="d-flex flex-column min-vh-100">

<!-- ================= HEADER ================= -->
<header class="sticky-top shadow-sm">
    <nav class="navbar navbar-expand-lg" style="background-color:#537031;">
        <div class="container-fluid">

            <!-- Logo -->
            <a class="navbar-brand d-flex align-items-center text-decoration-none"
               href="index.php" style="color:#FEFAE0; font-weight:600;">
                <img src="images/logo_dogsitter.png" height="42" class="me-2" alt="Logo">
                DogSynergie
            </a>

            <!-- Burger -->
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target="#navbarDogSitter">
                <span class="navbar-toggler-icon"></span>
            </button>

            <div class="collapse navbar-collapse" id="navbarDogSitter">

                <!-- CENTRE : recherche -->
                <div class="mx-lg-auto my-3 my-lg-0" style="max-width:480px; width:100%;">
                    <form class="d-flex">
                        <input class="form-control rounded-start-pill"
                               placeholder="Rechercher un dog sitter…"
                               style="background:#FEFAE0; border:none;">
                        <button class="btn rounded-end-pill"
                                style="background:#DDA15E; color:white;">
                            <i class="bi bi-search"></i>
                        </button>
                    </form>
                </div>

                <!-- DROITE : utilisateur -->
                <ul class="navbar-nav ms-lg-auto align-items-lg-center gap-2">
                    {% if utilisateurConnecte is defined %}
                        <li class="nav-item">
                            <a class="nav-link text-light"
                               href="index.php?controleur=conversation&methode=afficherAllConversation">
                                <i class="bi bi-chat-dots fs-5"></i>
                            </a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link fw-semibold"
                               style="color:#FEFAE0;"
                               href="index.php?controleur=utilisateur&methode=afficherUtilisateur&id_utilisateur={{ utilisateurConnecte.id_utilisateur }}">
                                {{ utilisateurConnecte.pseudo }}
                            </a>
                        </li>
                    {% else %}
                        <li class="nav-item">
                            <a class="nav-link text-light"
                               href="index.php?controleur=utilisateur&methode=authentification">
                                <i class="bi bi-person-circle fs-5"></i>
                            </a>
                        </li>
                    {% endif %}
                </ul>

            </div>
        </div>
    </nav>

    {% block breadcrumb %}
    {% if breadcrumb is defined %}
        <nav class="container-fluid" style="background:#2b3b17;">
            <ol class="breadcrumb m-0 py-2">
                {% for item in breadcrumb %}
                    {% if loop.last %}
                        <li class="breadcrumb-item active text-light">{{ item.title }}</li>
                    {% else %}
                        <li class="breadcrumb-item">
                            <a href="{{ item.url }}" class="text-light text-decoration-none">
                                {{ item.title }}
                            </a>
                        </li>
                    {% endif %}
                {% endfor %}
            </ol>
        </nav>
    {% endif %}
    {% endblock %}
</header>

<!-- ================= MAIN ================= -->
<main class="flex-grow-1">
    {% block content %}{% endblock %}
</main>

<!-- ================= FOOTER ================= -->
<footer class="text-center py-4 mt-auto"
        style="background-color:#537031; color:#FEFAE0;">
    <div class="container">

        <div class="mb-2">
            <a href="index.php" class="text-decoration-none mx-2" style="color:#DDA15E;">
                Accueil
            </a>

            <a href="#" class="text-decoration-none mx-2"
            style="color:#DDA15E;"
            data-bs-toggle="modal"
            data-bs-target="#confidentialiteModal">
                Politique de confidentialité
            </a>

            <a href="#" class="text-decoration-none mx-2"
            style="color:#DDA15E;"
            data-bs-toggle="modal"
            data-bs-target="#cguModal">
                CGU
            </a>

            <a href="index.php?controleur=newsletter&methode=afficher"
            class="text-decoration-none mx-2"
            style="color:#DDA15E;">
                Newsletter
            </a>
        </div>

        <div class="modal fade" id="confidentialiteModal" tabindex="-1" aria-labelledby="confidentialiteLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">

                    <div class="modal-header" style="background-color:#FAF6E9;">
                        <h5 class="modal-title fw-bold" id="confidentialiteLabel"
                            style="color:#537031;">
                            Politique de confidentialité
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body text-dark">

                        <h6 class="fw-bold">1. Données collectées</h6>
                        <p>
                            DogSynergie collecte uniquement les données nécessaires au bon
                            fonctionnement du service (compte utilisateur, contacts, annonces).
                        </p>

                        <h6 class="fw-bold">2. Utilisation des données</h6>
                        <p>
                            Les données sont utilisées exclusivement dans le cadre de la
                            mise en relation entre maîtres et dog sitters.
                        </p>

                        <h6 class="fw-bold">3. Conservation</h6>
                        <p>
                            Les données sont conservées tant que le compte est actif.
                        </p>

                        <h6 class="fw-bold">4. Droits de l’utilisateur</h6>
                        <p>
                            Conformément au RGPD, chaque utilisateur dispose d’un droit
                            d’accès, de rectification et de suppression de ses données.
                        </p>

                        <h6 class="fw-bold">5. Contact</h6>
                        <p>
                            Pour toute question : <strong>contact@dogsynergie.fr</strong>
                        </p>

                    </div>

                    <div class="modal-footer">
                        <button class="btn"
                                style="background-color:#537031; color:white;"
                                data-bs-dismiss="modal">
                            Fermer
                        </button>
                    </div>

                </div>
            </div>
        </div>

        <div class="modal fade" id="cguModal" tabindex="-1" aria-labelledby="cguLabel" aria-hidden="true">
            <div class="modal-dialog modal-lg modal-dialog-centered modal-dialog-scrollable">
                <div class="modal-content">

                    <div class="modal-header" style="background-color:#FAF6E9;">
                        <h5 class="modal-title fw-bold" id="cguLabel"
                            style="color:#537031;">
                            Conditions Générales d’Utilisation
                        </h5>
                        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                    </div>

                    <div class="modal-body text-dark">

                        <h6 class="fw-bold">1. Objet</h6>
                        <p>
                            Les présentes CGU encadrent l’utilisation de la plateforme
                            DogSynergie, service de mise en relation entre propriétaires
                            de chiens et dog sitters.
                        </p>

                        <h6 class="fw-bold">2. Accès au service</h6>
                        <p>
                            L’accès à la plateforme est gratuit. Certaines fonctionnalités
                            nécessitent la création d’un compte utilisateur.
                        </p>

                        <h6 class="fw-bold">3. Responsabilité</h6>
                        <p>
                            DogSynergie agit en tant qu’intermédiaire et ne saurait être
                            tenu responsable des prestations réalisées entre utilisateurs.
                        </p>

                        <h6 class="fw-bold">4. Compte utilisateur</h6>
                        <p>
                            L’utilisateur s’engage à fournir des informations exactes et
                            à ne pas usurper l’identité d’un tiers.
                        </p>

                        <h6 class="fw-bold">5. Données personnelles</h6>
                        <p>
                            Les données personnelles sont traitées conformément à la
                            politique de confidentialité.
                        </p>

                    </div>

                    <div class="modal-footer">
                        <button class="btn"
                                style="background-color:#537031; color:white;"
                                data-bs-dismiss="modal">
                            Fermer
                        </button>
                    </div>

                </div>
            </div>
        </div>


        <small>
            © Copyright {{ "now"|date("Y") }} - IUT de Bayonne et du Pays Basque - BUT2 Groupe 7
        </small>

    </div>
</footer>

{% block script %}{% endblock %}
</body>
</html>
