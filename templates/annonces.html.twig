{% extends 'base_template.twig' %}

{% block title %}Annonces{% endblock %}

{% block content %}
<div class="container-fluid py-4" style="background-color: #FEFAE0;">

{% if annoncesListe is defined and annoncesListe|length > 0 %}
    {% if id_utilisateur is defined %}
        <h2 class="text-center mb-4" style="color:#537031;">Annonces publiées par l'utilisateur {{ id_utilisateur }}</h2>
    {% else %}
<h2 class="text-center mb-4" style="color:#537031; font-family: 'Poppins', sans-serif;">NOS ANNONCES</h2>
    {% endif %}

    <div class="row g-4 justify-content-center"> 
        {% for annonce in annoncesListe %}
        <div class="col-12 col-md-6 col-lg-4">
        <div class="card shadow-lg border-0" style="background-color: #FEFAE0; border-left:6px solid #9AAD5A; width:100%; overflow:hidden;">
        <div class="card-body d-flex flex-column flex-grow-1 p-3" style="word-break: break-word;">
                <h5 class="card-title fw-bold text-center" style="color:#537031;">Annonce du {{ annonce.datePromenade }}</h5>
                <p class="mb-1"><strong style="color:#BC6C25;" >Horaire :</strong> {{ annonce.horaire }}</p>
                <p class="mb-1"><strong style="color:#BC6C25;">Durée :</strong> {{ annonce.duree }} minutes</p>
                <p class="mb-1"><strong style="color:#BC6C25;">Endroit :</strong> {{ annonce.endroitPromenade }}</p>
                <p class="mb-1"><strong style="color:#BC6C25;">Tarif :</strong> {{ annonce.tarif }} €</p>
                <p class="mb-1">
    <strong style="color:#BC6C25;">Status :</strong>
    {% if annonce.status == 'Disponible' %}
        <span class="badge" style="background-color:#537031; color:white; white-space:nowrap;">
            {{ annonce.status }}
        </span>
    {% elseif annonce.status == 'Réservé' %}
        <span class="badge" style="background-color:#BC6C25; color:white; white-space:nowrap;">
            {{ annonce.status }}
        </span>
    {% elseif annonce.status == 'Annulée' %}
        <span class="badge" style="background-color:#D9534F; color:white; white-space:nowrap;">
            {{ annonce.status }}
        </span>
    {% else %}
        <span class="badge" style="background-color:#DDA15E; color:white; white-space:nowrap;">
            {{ annonce.status }}
        </span>
    {% endif %}
</p>

                   <p class="mb-2 flex-grow-1" style="overflow:hidden; text-overflow:ellipsis; display:-webkit-box; -webkit-line-clamp:4; -webkit-box-orient:vertical;"><strong>Description :</strong><br>{{ annonce.description }}</p>  
                   <p class="text-end text-muted mt-auto pt-2 border-top">ID Utilisateur : {{ annonce.idUtilisateur }}</p>                </div>
            <div class="text-center pb-3">
<a href="?controleur=Annonce&methode=afficherAnnonce&id_annonce={{ annonce.idAnnonce }}" class="btn" style="background-color:#537031; color:white;">Voir l'annonce</a>    
            </div>
        </div>
        </div>
        {% endfor %} 
    </div>

{% else %}

      <div class="alert alert-warning text-center" role="alert" style="background-color: #DDA15E; color: white;">
    <p>Aucune annonce trouvée.</p>
{% endif %}


</div>
</div>

{% block footer %}
{% endblock %}

{% endblock %}
